# Задание
Дан файл с данными по клиентам и транзакциям: [customer_and_transaction.xlsx](https://github.com/yar21023/DB_for_DS/blob/main/customer_and_transaction.xlsx).  
Необходимо выполнить следующие пункты:  
*(2 балла) Продумать структуру базы данных и отрисовать в [редакторе](https://dbdiagram.io/home?utm_source=holistics&utm_medium=top_5_tools_blog).  
*(2 балла) Нормализовать базу данных (1НФ — 3НФ), описав, к какой нормальной форме приводится таблица и почему таблица в этой нормальной форме изначально не находилась.  
*(3 балла) Создать все таблицы в DBeaver, указав первичные ключи к таблицам, правильные типы данных, могут ли поля быть пустыми или нет (использовать команду CREATE TABLE).  
*(3 балла) Загрузить данные в таблицы в соответствии с созданной структурой (использовать команду INSERT INTO или загрузить файлы, используя возможности инструмента DBeaver; в случае загрузки файлами приложить скрины, что данные действительно были залиты).

# Решение

## Анализ таблиц и подготовка данных
Процесс анализа данных и их подготовке с подробными комментариями содержится в файле [db_hw1.ipynb](https://github.com/yar21023/DB_for_DS/blob/main/db_hw1.ipynb). 
В рамках анализа было выявленно:
1. Представленные данные уже находится в первой нормальной форме, так как значения всех колонок скалярны;
2. Записи в колонке gender имеют разный формат;
3. Вторая нормальная форма подразумевает что каждый столбец, который не является ключом, зависит от первичного ключа. Информация о товаре из таблицы transactions не зависит от непосредственно транзакции. Для приведения БД ко второй нормальной форме необходимо выделить в отдельную таблицу информацию о товаре;
4. Колонка product_id не является уникальным идентификатором конкретного товара, так как одному и тому же id соответсвуют разные товары;
5. Колонки "list_price" и "standard_cost" не имеют очевидной взаимосвязи с id продукта, поэтому разумней оставить их в таблице транзакций;

Для подготовки данных были произведены следующие операции:
1. Записи в колонке gender приведены к одному стандарту;
2. Информация о товаре выделена в отдельную таблицу product, с атрибутами "brand", "product_line", "product_class", "product_size", "product_id", а для использования в качестве первичного ключа сгенерирован суррогатный ключ.
3. Произведенно обновление таблицы transactions, с обновлением атрибута product_id на соответсвующие значения суррогатного ключа, а также удалением атрибутов, уже содержащихся в таблице product (за ислючением product_id, конечно).
4. Данные были экспортированны в csv для последующей загрузки в БД через графический интерфейс.
5. Позднее, при загрузки данных, был выявлен customers_id в таблице transactions, не содержащийся в таблице customers. Соответсвующие записи были удалены, чтобы не вызывать ошибку при импорте данных.

Дополнительно: было принято решение не выделять в отдельные справочники ряд параметров из таблицы customers, так как в рамках данного задания это представляется избыточным. В случае с параметрами "address", "state" и " postcode" их комбинация является уинкальной, а потому их выделение не является обязательным. 

## Отрисовка диаграммы
Визуальное представление схемы [diagram (dbdiagram.io).JPG](https://github.com/yar21023/DB_for_DS/blob/main/diagram%20(dbdiagram.io).JPG)

## Создание таблиц
*SQL скрипт создания таблиц [Script.sql](https://github.com/yar21023/DB_for_DS/blob/main/Script.sql);

*Скриншот скрипта [scripts.JPG](https://github.com/yar21023/DB_for_DS/blob/main/scripts.JPG).

## Заполнение данных
Заполнение БД в PostgeSQL:  
*[Продукты](https://github.com/yar21023/DB_for_DS/blob/main/products.JPG);  

*[Клиенты](https://github.com/yar21023/DB_for_DS/blob/main/customers.JPG);  

*[Транзакции](https://github.com/yar21023/DB_for_DS/blob/main/transactions.JPG);

*[Диаграмма](https://github.com/yar21023/DB_for_DS/blob/main/diagram.JPG). 
